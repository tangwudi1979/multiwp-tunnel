# 未来计划与可探索方向

虽然当前的多节点多活架构已经可以满足个人博客的高可用需求，但在这个体系之上，仍有许多可以进一步探索与优化的方向。

这里记录一些未来可能逐步实现的思路与想法，也算是一份小型的 roadmap。

---

## 1️⃣ 数据库层的多活同步

目前仍然采用单向的 rsync 导出文件同步数据库，适合单点写入、弱一致需求。

未来可以考虑：
- 引入 MySQL/MariaDB 异步主从，减少数据库文件传输成本。
- 甚至探索 Galera Cluster / MySQL Group Replication，形成真正意义上的多主同步。
  
不过对于个人博客体量而言，这种方式可能投入产出比不高，且增加维护复杂度，需要谨慎评估。

---

## 2️⃣ Cloudflare Worker 写入优化

当前 Worker 主要用于简单的反代，未来可探索：
- 在评论写入等操作上，在通过 Worker 分发写到多个节点之前进行健康检查，提高写入可用性。
- 或者结合队列（如 Cloudflare Queues）做最终一致性补偿，降低节点写入不一致的概率。

---

## 3️⃣ Edge 缓存进一步优化

目前依赖 APO 做全站缓存，未来可以：
- 利用 Transform Rules、Ruleset 做更细粒度的缓存控制。
- 比如针对 `/api` 路径不缓存，对 `/wp-content/uploads` 设置更长 TTL。

这样可在不同内容上做到更精细的资源调度与加速。

---

## 4️⃣ 全链路监控与自动化

虽然目前通过简单脚本 + Bark 实现了探活通知，但仍属于「人工干预」阶段。

未来可以：
- 使用 GitHub Actions 定时探活，如果多次失败自动调用 Cloudflare API 切换到静态 Pages。
- 或者采用更专业的监控（如 Uptime Kuma）+ Webhook 实现自动拉起或报警。

---

## 5️⃣ 静态站自动兜底

Simply Static 已经在定期生成全站静态文件，部署在 Cloudflare Pages 上作为极端容灾方案。

后续可探索：
- 自动检测多节点全部不可用后，脚本自动将域名切换到 Pages。
- 或者在 Edge Worker 内实现多次回源失败后 fallback 到静态站点。

目前考虑到复杂度，这部分依旧手动控制，稳健为先。

---

## 6️⃣ 跨云对象存储与媒体优化

虽然现在所有媒体文件都已经使用云端图床，确保了多节点共享资源。

未来也可以进一步分散风险：
- 同步多家对象存储（如 R2 + B2），结合不同 CDN 做地理就近加速。
- 或使用 Cloudflare Images/Stream 来托管大媒体文件，降低自管压力。

---

## 小结

这些探索方向并非当下所必需，但正是多活架构的乐趣所在 ——  
从最小可行方案（单向 rsync + Tunnel）逐步演进到更多自动化、更多智能调度。

也是留给未来不断优化、持续折腾的空间。

---

## 后续章节预览

- 📌 [查看 FAQ 与一些值得进一步探讨的问题](./07-faq.md)

---